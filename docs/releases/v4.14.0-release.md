# kctsb v4.14.0 Release Notes

**å‘å¸ƒæ—¥æœŸ**: 2026-01-25  
**ç‰ˆæœ¬**: 4.14.0  
**ä»£å·**: Privacy Computation Enhancement

---

## ğŸ¯ ç‰ˆæœ¬æ¦‚è¿°

v4.14.0 ä¸“æ³¨äºéšç§è®¡ç®—åè®®çš„å®Œå–„ä¸å¢å¼ºï¼Œæ–°å¢å¤šä¸ªç”Ÿäº§çº§ PSI/PIR æ¨¡å—ï¼Œå¹¶ä¿®å¤äº† SEAL åŸºå‡†æµ‹è¯•ç¼–è¯‘é—®é¢˜ã€‚æœ¬ç‰ˆæœ¬å¼•å…¥äº†:

- **ç”Ÿäº§çº§ OT Extension** - è‡ªåŒ…å« IKNP åè®®å®ç°ï¼Œå‚è€ƒ libOTe
- **CUDA GPU PIR** - GPU åŠ é€Ÿç§å¯†ä¿¡æ¯æ£€ç´¢ï¼Œå« CPU è‡ªåŠ¨å›é€€
- **Multi-party PSI** - æ”¯æŒ 3+ å‚ä¸æ–¹çš„éšç§é›†åˆäº¤é›†
- **PSI-CA** - åŸºæ•°ä¸å±æ€§ PSIï¼Œæ”¯æŒèšåˆå’Œé˜ˆå€¼æ¨¡å¼
- **PIR Preprocessing** - ç¦»çº¿/åœ¨çº¿åˆ†ç¦» PIRï¼ŒO(âˆšN) åœ¨çº¿æŸ¥è¯¢

---

## âœ¨ æ–°åŠŸèƒ½

### 1. ç”Ÿäº§çº§ OT Extension (`ot_extension.h/.cpp`)

åŸºäº IKNP åè®®çš„è‡ªåŒ…å« OT Extension å®ç°ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨ libOTe åº“ã€‚

**ç‰¹æ€§**:
- IKNP åè®® (Ishai-Kilian-Nissim-Petrank)
- åŠè¯šå®/æ¶æ„å®‰å…¨æ¨¡å‹
- Random OT / Correlated OT æ”¯æŒ
- AES-NI / AVX2 ç¡¬ä»¶åŠ é€Ÿ
- çŸ©é˜µè½¬ç½®ä¼˜åŒ– (128x128 å—)

**API ç¤ºä¾‹**:
```cpp
#include <kctsb/advanced/psi/ot_extension.h>

using namespace kctsb::psi;

// å‘é€æ–¹
OTExtSenderConfig sender_cfg;
sender_cfg.num_ots = 10000;
sender_cfg.use_aesni = true;
OTExtSender sender(sender_cfg);
auto messages = sender.send(base_ot_keys);

// æ¥æ”¶æ–¹
OTExtReceiverConfig receiver_cfg;
receiver_cfg.num_ots = 10000;
OTExtReceiver receiver(receiver_cfg);
auto selected = receiver.receive(choice_bits, base_ot_keys);
```

### 2. CUDA GPU PIR (`pir_cuda.h/.cpp`)

GPU åŠ é€Ÿçš„ç§å¯†ä¿¡æ¯æ£€ç´¢ï¼Œæ”¯æŒè‡ªåŠ¨ CPU å›é€€ã€‚

**ç‰¹æ€§**:
- BFV/BGV/CKKS æ–¹æ¡ˆæ”¯æŒ
- CUDA æµå¹¶è¡Œå¤„ç†
- æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–
- æ—  CUDA ç¯å¢ƒè‡ªåŠ¨å›é€€ CPU

**API ç¤ºä¾‹**:
```cpp
#include <kctsb/advanced/psi/pir_cuda.h>

using namespace kctsb::pir;

CudaPIRConfig config;
config.database_size = 100000;
config.entry_byte_size = 256;
config.use_gpu = true;

CudaPIRServer server(config);
server.set_database(database);
server.setup();

CudaPIRClient client(config);
auto query = client.create_query(42);
auto response = server.answer(query);
auto entry = client.decode_response(response);
```

### 3. Multi-party PSI (`multiparty_psi.h/.cpp`)

æ”¯æŒ 3+ å‚ä¸æ–¹çš„éšç§é›†åˆäº¤é›†åè®®ã€‚

**ç‰¹æ€§**:
- æ˜Ÿå½¢æ‹“æ‰‘ (ä¸€ä¸ªåè°ƒè€…)
- ç¯å½¢æ‹“æ‰‘ (é¡ºåºä¼ é€’)
- æ ‘å½¢æ‹“æ‰‘ (å±‚çº§èšåˆ)
- åŠè¯šå®/æ¶æ„å®‰å…¨
- æ”¯æŒ 10+ å‚ä¸æ–¹

**API ç¤ºä¾‹**:
```cpp
#include <kctsb/advanced/psi/multiparty_psi.h>

using namespace kctsb::psi;

MPSIConfig config;
config.num_parties = 5;
config.topology = KCTSB_MPSI_TOPOLOGY_STAR;

MultipartyPSI mpsi(config);
mpsi.set_my_set(my_elements);
auto intersection = mpsi.compute(network);
```

### 4. PSI-CA (`psi_ca.h/.cpp`)

PSI with Cardinality and Attributesï¼Œæ”¯æŒå¤šç§æŠ«éœ²æ¨¡å¼ã€‚

**æ¨¡å¼**:
- `CARDINALITY_ONLY` - ä»…è¿”å›äº¤é›†å¤§å°
- `WITH_PAYLOAD` - è¿”å›äº¤é›†å…ƒç´ åŠå…³è”å±æ€§
- `SUM` - è¿”å›å±æ€§èšåˆå€¼
- `THRESHOLD` - ä»…å½“äº¤é›†æ»¡è¶³é˜ˆå€¼æ—¶è¿”å›

**èšåˆå‡½æ•°**:
- SUM, COUNT, AVG, MIN, MAX

**API ç¤ºä¾‹**:
```cpp
#include <kctsb/advanced/psi/psi_ca.h>

using namespace kctsb::psi;

PSICAConfig config;
config.mode = KCTSB_PSICA_CARDINALITY_ONLY;

PSICA psi_ca(config);
psi_ca.set_server_set(server_elements);
size_t cardinality = psi_ca.compute_cardinality(client_elements);
```

### 5. PIR Preprocessing (`pir_preprocessing.h/.cpp`)

ç¦»çº¿/åœ¨çº¿åˆ†ç¦» PIRï¼Œé€šè¿‡é¢„å¤„ç†åŠ é€Ÿåœ¨çº¿æŸ¥è¯¢ã€‚

**æ–¹æ¡ˆ**:
- Hint-based PIR: å®¢æˆ·ç«¯å­˜å‚¨ O(âˆšN) æç¤º
- Keyword PIR: æŒ‰å…³é”®å­—æ£€ç´¢
- Batch PIR: æ‰¹é‡æŸ¥è¯¢åˆ†æ‘Šæˆæœ¬

**æ€§èƒ½**:
- ç¦»çº¿é˜¶æ®µ: O(N) æœåŠ¡å™¨å·¥ä½œ (æ•°æ®åº“æ›´æ–°æ—¶ä¸€æ¬¡æ€§)
- åœ¨çº¿é˜¶æ®µ: O(âˆšN) æœåŠ¡å™¨å·¥ä½œ/æŸ¥è¯¢

**API ç¤ºä¾‹**:
```cpp
#include <kctsb/advanced/psi/pir_preprocessing.h>

using namespace kctsb::pir;

PreprocConfig config;
config.database_size = 100000;
config.entry_byte_size = 256;

// ç¦»çº¿é˜¶æ®µ
PreprocPIRServer server(config);
server.set_database(database);
auto hints = server.preprocess();

// å®¢æˆ·ç«¯å­˜å‚¨ hints
PreprocPIRClient client(config);
client.set_hints(hints);

// åœ¨çº¿é˜¶æ®µ (å¿«é€Ÿ)
auto query = client.create_query(42);
auto response = server.answer(query);
auto entry = client.decode_response(response);
```

---

## ğŸ”§ ä¿®å¤ä¸æ”¹è¿›

### SEAL Benchmark ä¿®å¤

- **é—®é¢˜**: ä¹‹å‰çš„ `seal_pir.cpp` å°è¯•ä»æºç ç¼–è¯‘ SEALï¼Œå¯¼è‡´ `seal/util/config.h` ç¼ºå¤±é”™è¯¯
- **è§£å†³**: åˆ é™¤ `seal_pir.cpp`ï¼Œé‡å†™ `benchmark_psi_pir.cpp` ä»…é“¾æ¥é¢„ç¼–è¯‘çš„ SEAL é™æ€åº“
- **ä½ç½®**: `thirdparty/win-x64/lib/libseal-4.1.a`

### CMake é›†æˆå¢å¼º

- `tests/CMakeLists.txt`: æ·»åŠ  `test_psi_pir` ç›®æ ‡
- `benchmarks/CMakeLists.txt`: æ·»åŠ  `bench_psi_pir` ç›®æ ‡
- æ­£ç¡®é“¾æ¥ SEAL é¢„ç¼–è¯‘åº“å’Œ Windows bcrypt

---

## ğŸ“ æ–°å¢æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | æè¿° | ä»£ç è¡Œæ•° |
|---------|------|---------|
| `include/kctsb/advanced/psi/ot_extension.h` | OT Extension å¤´æ–‡ä»¶ | ~340 |
| `src/advanced/psi/ot_extension.cpp` | IKNP å®ç° | ~700 |
| `include/kctsb/advanced/psi/pir_cuda.h` | CUDA PIR å¤´æ–‡ä»¶ | ~350 |
| `src/advanced/psi/pir_cuda.cpp` | CUDA PIR CPU å›é€€ | ~500 |
| `include/kctsb/advanced/psi/multiparty_psi.h` | Multi-party PSI å¤´æ–‡ä»¶ | ~300 |
| `src/advanced/psi/multiparty_psi.cpp` | MPSI å®ç° | ~450 |
| `include/kctsb/advanced/psi/psi_ca.h` | PSI-CA å¤´æ–‡ä»¶ | ~250 |
| `src/advanced/psi/psi_ca.cpp` | PSI-CA å®ç° | ~400 |
| `include/kctsb/advanced/psi/pir_preprocessing.h` | PIR Preprocessing å¤´æ–‡ä»¶ | ~280 |
| `src/advanced/psi/pir_preprocessing.cpp` | PIR Preprocessing å®ç° | ~500 |

**æ€»è®¡**: ~4,070 è¡Œæ–°ä»£ç 

---

## ğŸ¯ PSI/PIR æ–¹æ¡ˆé€‰æ‹©æŒ‡å—

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|------|----------|------|
| å¤§è§„æ¨¡å¹³è¡¡æ•°æ®é›† (ç™¾ä¸‡çº§) | Piano-PSI | O(âˆšn) é€šä¿¡ï¼ŒåŠè¯šå®å®‰å…¨ |
| æ¶æ„å®‰å…¨è¦æ±‚ | OT-PSI | æ”¯æŒæ¶æ„å®‰å…¨æ¨¡å‹ |
| å¤šæ–¹å‚ä¸ (3+) | Multi-party PSI | æ˜Ÿå½¢/ç¯å½¢æ‹“æ‰‘ä¼˜åŒ– |
| ä»…éœ€äº¤é›†åŸºæ•° | PSI-CA (åŸºæ•°æ¨¡å¼) | æœ€å°ä¿¡æ¯æŠ«éœ² |
| éšç§ç»Ÿè®¡èšåˆ | PSI-CA (èšåˆæ¨¡å¼) | æ”¯æŒ SUM/AVG ç­‰ |
| å¤§è§„æ¨¡ PIR + GPU | CUDA PIR | å¹¶è¡ŒåŠ é€Ÿ |
| é«˜é¢‘ PIR æŸ¥è¯¢ | PIR Preprocessing | ç¦»çº¿é¢„è®¡ç®—æé€Ÿ |

---

## ğŸ—ï¸ æ„å»ºä¸æµ‹è¯•

```powershell
# Windows æ„å»º
cd D:\pyproject\kctsb
$env:PATH="C:\msys64\mingw64\bin;$env:PATH"

# é…ç½®
cmake -B build -G Ninja `
    -DCMAKE_BUILD_TYPE=Release `
    -DKCTSB_BUILD_CLI=ON `
    -DKCTSB_BUILD_TESTS=ON `
    -DKCTSB_BUILD_BENCHMARKS=ON

# æ„å»º
cmake --build build --parallel

# è¿è¡Œæµ‹è¯•
ctest --test-dir build --output-on-failure

# è¿è¡Œ PSI/PIR åŸºå‡†æµ‹è¯•
.\build\bin\kctsb_benchmark.exe psi_pir
```

---

## ğŸ“¦ ä¾èµ–

### æ ¸å¿ƒä¾èµ– (thirdparty/)
- âœ… GMP 6.3.0+
- âœ… gf2x 1.3.0+
- âœ… NTL 11.6.0+

### å¯é€‰ä¾èµ–
- âš ï¸ SEAL 4.1.2 (ä»… benchmark é“¾æ¥é¢„ç¼–è¯‘åº“)
- âš ï¸ CUDA Toolkit (GPU PIRï¼Œå¯é€‰)

---

## âš ï¸ å·²çŸ¥é™åˆ¶

1. **CUDA PIR**: å½“å‰ä¸º CPU å›é€€å®ç°ï¼ŒçœŸæ­£çš„ CUDA å†…æ ¸å¾…åç»­ç‰ˆæœ¬
2. **Multi-party PSI**: ç½‘ç»œä¼ è¾“æ¥å£éœ€ç”¨æˆ·å®ç°å›è°ƒ
3. **PSI-CA èšåˆ**: ç›®å‰ä»…æ”¯æŒæ•´æ•°ç±»å‹å±æ€§

---

## ğŸ”œ åç»­è®¡åˆ’ (v4.15.0)

- [ ] CUDA PIR çœŸå® GPU å†…æ ¸å®ç°
- [ ] PSI-CA æµ®ç‚¹æ•°èšåˆæ”¯æŒ
- [ ] PIR Keyword æ¨¡å¼å®Œæ•´å®ç°
- [ ] Multi-party PSI å®é™…ç½‘ç»œæµ‹è¯•
- [ ] OT Extension æ¶æ„å®‰å…¨æ ¡éªŒ

---

**å˜æ›´ç»Ÿè®¡**:
- æ–°å¢ä»£ç : ~4,070 è¡Œ
- ä¿®æ”¹æ–‡ä»¶: 3
- æ–°å¢æ–‡ä»¶: 10

---

Â© 2019-2026 knightc. All rights reserved.
