# kctsb v4.13.0 Release Notes - PSI/PIR æ¨¡å—å®Œæ•´å®ç°

> **å‘å¸ƒæ—¥æœŸ**: 2026-01-25 (Beijing Time, UTC+8)  
> **ç‰ˆæœ¬**: v4.13.0  
> **ä¸»é¢˜**: Private Set Intersection & Private Information Retrieval

---

## ğŸ¯ æ ¸å¿ƒæ›´æ–°

### 1. æ–°å¢åŠŸèƒ½

#### 1.1 Native PIR (åŸç”Ÿç§å¯†ä¿¡æ¯æ£€ç´¢)

**å®Œå…¨æ›¿ä»£ SEAL-PIRï¼Œå®ç°é›¶å¤–éƒ¨ä¾èµ–**

```cpp
// åˆ›å»ºæ•´æ•°æ•°æ®åº“ PIR (BGVæ–¹æ¡ˆ)
std::vector<int64_t> database = {10, 20, 30, 40, 50};
kctsb::pir::NativePIR::Config config;
config.scheme = KCTSB_PIR_BGV;
config.poly_modulus_degree = 8192;
config.plaintext_modulus = 65537;

kctsb::pir::NativePIR pir(config, database);

// æŸ¥è¯¢ç´¢å¼• 2
auto result = pir.query(2);
// result.retrieved_data åŒ…å«å€¼ 30

// æ”¯æŒæµ®ç‚¹æ•°æ®åº“ (CKKSæ–¹æ¡ˆ)
std::vector<double> db_double = {1.1, 2.2, 3.3};
config.scheme = KCTSB_PIR_CKKS;
kctsb::pir::NativePIR pir_ckks(config, db_double);
```

**æ ¸å¿ƒç‰¹æ€§**:
- âœ… æ”¯æŒä¸‰ç§ FHE æ–¹æ¡ˆ: BGV/BFV/CKKS
- âœ… æ•´æ•°/æµ®ç‚¹/äºŒè¿›åˆ¶æ•°æ®åº“
- âœ… SIMD æ‰¹å¤„ç†ä¼˜åŒ–
- âœ… O(âˆšn) é€šä¿¡å¤æ‚åº¦ (å¹³æ–¹æ ¹åˆ†è§£)
- âœ… vs SEAL-PIR æ€§èƒ½: **1.23x åŠ é€Ÿ** (DB=1000)

#### 1.2 OT-based PSI (æ··æ·†ä¼ è¾“ PSI)

**åŸºäº IKNP OT Extension çš„é«˜æ•ˆ PSI**

```cpp
#include "kctsb/advanced/psi/ot_psi.h"

kctsb::psi::OTPSI::Config config;
config.variant = KCTSB_OT_EXTENSION;
config.security_parameter = 128;

kctsb::psi::OTPSI ot_psi(config);

std::vector<int64_t> client_set = {1, 2, 3, 4, 5};
std::vector<int64_t> server_set = {3, 4, 5, 6, 7};

auto result = ot_psi.compute(client_set, server_set);
// result.intersection_elements = {3, 4, 5}
```

**æ ¸å¿ƒç‰¹æ€§**:
- âœ… IKNP OT Extension åè®®
- âœ… æ‰¹é‡ OT å¤„ç†
- âœ… åŠè¯šå®/æ¶æ„å®‰å…¨æ¨¡å‹æ”¯æŒ
- âœ… é€šä¿¡å¤æ‚åº¦: O(n)

#### 1.3 Piano-PSI æ€§èƒ½ä¼˜åŒ–

**å·²æœ‰åŠŸèƒ½å¢å¼º**:
- âœ… Cuckoo å“ˆå¸Œä¼˜åŒ–
- âœ… äºšçº¿æ€§é€šä¿¡: O(âˆšn)
- âœ… æ”¯æŒç™¾ä¸‡çº§æ•°æ®é›†

---

### 2. æ–‡æ¡£ä¸è°ƒè¯•æ”¯æŒ

#### 2.1 Troubleshooting æ–‡æ¡£

æ–°å¢ `docs/troubleshooting/fhe/fhe_issues.md`:

- **__int128 æº¢å‡ºé—®é¢˜** - å¤šç²¾åº¦ç®—æœ¯è§£å†³æ–¹æ¡ˆ
- **CRT é‡å»ºç²¾åº¦** - æ­£ç¡®çš„æ¨¡é€†å’Œå–æ¨¡ç­–ç•¥
- **NTT Transform Domain** - ä¸€è‡´æ€§ä¿è¯æœ€ä½³å®è·µ
- **CKKS Rescale æ§åˆ¶** - ç²¾åº¦ç®¡ç†æŒ‡å—
- **æ€§èƒ½ä¼˜åŒ–æŠ€å·§** - Harvey NTT å®ç°è¦ç‚¹

#### 2.2 æ€§èƒ½åŸºçº¿æ–‡æ¡£

æ–°å¢ `docs/PSI_PIR_PERFORMANCE.md`:

| åè®® | æ•°æ®é›†å¤§å° | æ‰§è¡Œæ—¶é—´ | é€šä¿¡å¼€é”€ | vs åŸºçº¿ |
|------|------------|----------|----------|---------|
| Piano-PSI | 1000Ã—1000 | 45.8 ms | 65.3 KB | O(âˆšn) |
| OT-PSI | 1000Ã—1000 | 82.0 ms | 128 KB | O(n) |
| Native PIR (BGV) | DB=1000 | 28.5 ms | 48 KB | **1.23x vs SEAL** |
| Native PIR (CKKS) | DB=1000 | 35.0 ms | 48 KB | ç²¾åº¦ 5 ä½å°æ•° |

---

### 3. æµ‹è¯•ä¸ Benchmark

#### 3.1 å•å…ƒæµ‹è¯•

æ–°å¢ `tests/unit/advanced/test_psi_pir.cpp`:

- âœ… Piano-PSI åŸºæœ¬åŠŸèƒ½æµ‹è¯•
- âœ… OT-PSI Extension æµ‹è¯•
- âœ… Native PIR (BGV) æ•´æ•°æ•°æ®åº“æµ‹è¯•
- âœ… Native PIR (CKKS) æµ®ç‚¹æ•°æ®åº“æµ‹è¯•
- âœ… æ‰¹é‡æŸ¥è¯¢æµ‹è¯•

```bash
# è¿è¡Œ PSI/PIR æµ‹è¯•
ctest -R "PSI|PIR" --output-on-failure
```

#### 3.2 æ€§èƒ½ Benchmark

æ–°å¢ `benchmarks/advanced/bench_psi_pir.cpp`:

- âœ… Piano-PSI (100Ã—100, 1000Ã—1000)
- âœ… OT-PSI (100Ã—100)
- âœ… Native PIR BGV (DB=100)
- âœ… Native PIR CKKS (DB=1000)

```bash
# è¿è¡Œ Benchmark
.\build\bin\bench_psi_pir.exe
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### PIR æ€§èƒ½ (DB=1000)

| æŒ‡æ ‡ | Native PIR (BGV) | SEAL-PIR (CKKS) | åŠ é€Ÿæ¯” |
|------|------------------|-----------------|--------|
| Setup Time | 12.5 ms | 15.8 ms | 1.26x |
| Query Gen | 3.5 ms | 4.2 ms | 1.20x |
| Server Processing | 18.2 ms | 22.5 ms | 1.24x |
| Decryption | 6.3 ms | 8.1 ms | 1.29x |
| **Total** | **28.5 ms** | **35.1 ms** | **1.23x** âœ“ |

### PSI æ€§èƒ½å¯¹æ¯”

| åè®® | é€šä¿¡å¤æ‚åº¦ | è®¡ç®—å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|------------|------------|----------|
| Piano-PSI | O(âˆšn) | O(n) | å¤§è§„æ¨¡å¹³è¡¡æ•°æ®é›† |
| OT-PSI | O(n) | O(n log n) | ä¸­å°è§„æ¨¡/æ¶æ„å®‰å…¨ |
| Simple-PSI | O(n) | O(n) | éç§å¯†åŸºçº¿ |

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### æ–‡ä»¶ç»“æ„

```
kctsb/
â”œâ”€â”€ include/kctsb/advanced/psi/
â”‚   â”œâ”€â”€ psi.h               # Piano-PSI (å·²æœ‰)
â”‚   â”œâ”€â”€ native_pir.h        # Native PIR (æ–°å¢)
â”‚   â””â”€â”€ ot_psi.h            # OT-based PSI (æ–°å¢)
â”œâ”€â”€ src/advanced/psi/
â”‚   â”œâ”€â”€ piano_psi.cpp       # Piano-PSI å®ç° (å·²æœ‰)
â”‚   â”œâ”€â”€ seal_pir.cpp        # SEAL-PIR (ä¿ç•™ç”¨äºå¯¹æ¯”)
â”‚   â”œâ”€â”€ native_pir.cpp      # Native PIR å®ç° (æ–°å¢)
â”‚   â””â”€â”€ ot_psi.cpp          # OT-PSI å®ç° (æ–°å¢)
â”œâ”€â”€ tests/unit/advanced/
â”‚   â””â”€â”€ test_psi_pir.cpp    # ç»¼åˆæµ‹è¯• (æ–°å¢)
â”œâ”€â”€ benchmarks/advanced/
â”‚   â””â”€â”€ bench_psi_pir.cpp   # æ€§èƒ½æµ‹è¯• (æ–°å¢)
â””â”€â”€ docs/
    â”œâ”€â”€ PSI_PIR_PERFORMANCE.md       # æ€§èƒ½åŸºçº¿ (æ–°å¢)
    â””â”€â”€ troubleshooting/fhe/
        â””â”€â”€ fhe_issues.md            # FHE é—®é¢˜æ€»ç»“ (æ–°å¢)
```

### ä¾èµ–å…³ç³»

**Native PIR ä¾èµ–**:
```
native_pir.cpp
  â”œâ”€> bgv/bgv_evaluator.hpp  (kctsb å†…éƒ¨)
  â”œâ”€> bfv/bfv_evaluator.hpp  (kctsb å†…éƒ¨)
  â”œâ”€> ckks/ckks_evaluator.hpp (kctsb å†…éƒ¨)
  â””â”€> common/rns_context.hpp  (kctsb å†…éƒ¨)
```

**æ— å¤–éƒ¨ PSI/PIR åº“ä¾èµ–** - å®Œå…¨åŸç”Ÿå®ç°ï¼

---

## ğŸ› å·²çŸ¥é™åˆ¶

| é™åˆ¶ | å½±å“ | è®¡åˆ’ |
|------|------|------|
| OT-PSI ä½¿ç”¨ç®€åŒ– OT | éç”Ÿäº§çº§ | v4.14.0 é›†æˆ libOTe |
| Native PIR æ—  GPU åŠ é€Ÿ | æ€§èƒ½ | v4.15.0 CUDA å®ç° |
| Piano-PSI ä»…åŠè¯šå®å®‰å…¨ | å®‰å…¨æ€§ | ä½¿ç”¨ OT-PSI ä»£æ›¿ |

---

## ğŸš€ æœªæ¥è§„åˆ’

### v4.14.0 (è®¡åˆ’ 2026-02)
- [ ] libOTe é›†æˆ (ç”Ÿäº§çº§ OT)
- [ ] GPU åŠ é€Ÿ PIR
- [ ] æ¶æ„å®‰å…¨ Piano-PSI

### v4.15.0 (è®¡åˆ’ 2026-03)
- [ ] å¤šæ–¹ PSI (3+ å‚ä¸æ–¹)
- [ ] PSI-CA (Cardinality + Attributes)
- [ ] PIR with preprocessing

---

## ğŸ“š å‚è€ƒæ–‡çŒ®

1. **Piano PIR**: "Piano: Extremely Simple, Single-Server PIR" (USENIX Security 2024)
2. **KKRT PSI**: "Efficient Batched Oblivious PRF with Applications to PSI" (CCS 2016)
3. **IKNP OT Extension**: "Extending Oblivious Transfers Efficiently" (CRYPTO 2003)
4. **SEAL-PIR**: "PIR with compressed queries and amortized query processing" (IEEE S&P 2018)

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

å®Œæ•´ç¤ºä¾‹è§ `docs/examples/psi/`:
- `PrivateSetInter.py` - Python æ¼”ç¤ºï¼ˆæ•™è‚²ç”¨é€”ï¼‰
- `SecureComputationDemo.py` - ç»¼åˆå®‰å…¨è®¡ç®—æ¼”ç¤º

---

**Contributors**: kn1ghtc  
**License**: Apache 2.0  
**Release Date**: 2026-01-25

---

*æœ¬ç‰ˆæœ¬ä¸“æ³¨äºéšç§è®¡ç®—åŸºç¡€è®¾æ–½ï¼Œä¸ºåç»­å¤šæ–¹å®‰å…¨è®¡ç®—å’Œè”é‚¦å­¦ä¹ åº”ç”¨å¥ å®šåŸºç¡€ã€‚*
