# kctsb v4.2.0 åŒæ€åŠ å¯†æ€§èƒ½åˆ†ææŠ¥å‘Š

**Version**: 4.2.0  
**Date**: 2026-01-19 (Beijing Time, UTC+8)  
**Platform**: Windows 11 (x86_64)  
**Compiler**: GCC 13.2.0 (MinGW-W64) with LTO  
**Backend**: NTL Source Integration + GMP 6.3.0 + gf2x 1.3.0

---

## ğŸ“‹ Executive Summary

æœ¬æŠ¥å‘Šåˆ†æ kctsb v4.2.0 åŒæ€åŠ å¯† (BGV/BFV/CKKS) å®ç°ä¸ä¸šç•Œæ ‡å‡† SEAL 4.1 çš„æ€§èƒ½å¯¹æ¯”ã€‚
å½“å‰å®ç°ä»¥åŠŸèƒ½æ­£ç¡®æ€§ä¸ºé¦–è¦ç›®æ ‡ï¼Œæ€§èƒ½ä¼˜åŒ–å°†åœ¨åç»­ç‰ˆæœ¬è¿›è¡Œã€‚

### ğŸ¯ æ ¸å¿ƒå‘ç°

| æ–¹æ¡ˆ | æµ‹è¯•çŠ¶æ€ | åŠŸèƒ½å®Œæ•´æ€§ | æ€§èƒ½å·®è· vs SEAL | æ ¹æœ¬åŸå›  |
|------|---------|------------|------------------|----------|
| **BGV** | âœ… é€šè¿‡ (39/39 tests) | 100% | 30-2000x | æ—  NTT RNS åŠ é€Ÿ |
| **BFV** | âœ… é€šè¿‡ (26/26 tests) | 100% | 33-2120x | å¤ç”¨ BGV åŸºç¡€è®¾æ–½ |
| **CKKS** | âœ… é€šè¿‡ (33/33 tests) | 100% | å¾…æµ‹ | åŒ BGV |

### ğŸ“Š å…³é”®æ€§èƒ½æ•°æ® (n=8192, 128-bit å®‰å…¨)

| æ“ä½œ | kctsb BGV (ms) | kctsb BFV (ms) | SEAL 4.1 (ms) | kctsb/SEAL æ¯”ç‡ |
|------|----------------|----------------|---------------|-----------------|
| KeyGen (SK+PK) | 1634 | 1634 | 50 | **33x** |
| Encrypt | 8614 | 8650 | 5 | **1730x** |
| Decrypt | 4283 | 4240 | 2 | **2120x** |
| Add | 1.2 | 1.2 | 0.1 | **12x** |
| Multiply | 2971 | 3434 | 10 | **343x** |
| Multiply+Relin | 18686 | 25123 | 18 | **1396x** |

---

## ğŸ”¬ è¯¦ç»†æ€§èƒ½åˆ†æ

### 1. BGV æ–¹æ¡ˆæ€§èƒ½

#### 1.1 TOY_PARAMS (n=256, å¿«é€ŸéªŒè¯)

| æ“ä½œ | æ—¶é—´ (ms) | ååé‡ (ops/s) |
|------|----------|----------------|
| KeyGen | 7.4 | 135 |
| Encrypt | 3.2 | 313 |
| Decrypt | 1.7 | 588 |
| Add | 0.03 | 33,333 |
| Multiply | 6.3 | 159 |

**åˆ†æ**: TOY_PARAMS ä¸‹æ€§èƒ½åˆç†ï¼Œè¯æ˜ç®—æ³•å®ç°æ­£ç¡®ã€‚

#### 1.2 SECURITY_128 (n=8192, ç”Ÿäº§ç¯å¢ƒ)

| æ“ä½œ | æ—¶é—´ (ms) | ååé‡ (ops/s) | SEAL å‚è€ƒ (ms) | å·®è· |
|------|----------|----------------|----------------|------|
| KeyGen | 1634 | 0.6 | 50 | 33x |
| Relin KeyGen | 8914 | 0.1 | N/A | - |
| Encrypt | 8614 | 0.1 | 5 | 1730x |
| Decrypt | 4283 | 0.2 | 2 | 2120x |
| Add | 1.2 | 833 | 0.1 | 12x |
| Multiply | 2971 | 0.3 | 10 | 297x |
| Multiply+Relin | 18686 | 0.05 | 18 | 1038x |

### 2. BFV æ–¹æ¡ˆæ€§èƒ½

BFV å¤ç”¨ BGV åŸºç¡€è®¾æ–½ï¼Œæ€§èƒ½ç‰¹å¾ç›¸ä¼¼ï¼š

| æ“ä½œ | BFV (ms) | BGV (ms) | å·®å¼‚ |
|------|----------|----------|------|
| Encrypt | 3.247 | 3.243 | +0.1% |
| Decrypt | 1.7 | 1.6 | +1.9% |
| Add | 0.03 | 0.03 | +0.3% |
| Multiply | 5.8 | 6.3 | -8.6% |

**åˆ†æ**: BFV ä¸ BGV æ€§èƒ½é«˜åº¦ä¸€è‡´ï¼Œç¬¦åˆè®¾è®¡é¢„æœŸã€‚

### 3. CKKS æ–¹æ¡ˆæ€§èƒ½

#### 3.1 åŠŸèƒ½éªŒè¯ (TOY_PARAMS n=256)

| æµ‹è¯•ç±»åˆ« | é€šè¿‡æ•° | è¦†ç›–èŒƒå›´ |
|----------|--------|----------|
| å‚æ•°éªŒè¯ | 4/4 | TOY, SECURITY_128, SlotCount |
| ä¸Šä¸‹æ–‡æ„å»º | 4/4 | Construction, KeyGen, ModulusChain |
| ç¼–ç å™¨ | 6/6 | Real, Complex, Scale, Zeros |
| åŠ å¯†/è§£å¯† | 5/5 | Single, Vector, Symmetric, Level, Scale |
| åŒæ€è¿ç®— | 6/6 | Add, Sub, Multiply, AddPlain, MulPlain |
| Rescale | 3/3 | ReducesLevel, ReducesScale, MultiplyRelinRescale |
| ç²¾åº¦æµ‹è¯• | 4/4 | Small, Large, Negative, Mixed |
| æ·±åº¦æµ‹è¯• | 2/2 | TwoMultiplications, AdditionsPreserveLevel |

**æ€»è®¡**: 33/33 æµ‹è¯•é€šè¿‡ âœ…

#### 3.2 ç²¾åº¦éªŒè¯

| å€¼èŒƒå›´ | ç¼–ç ç²¾åº¦ | åŒæ€è¿ç®—åç²¾åº¦ |
|--------|----------|----------------|
| å°æ•°å€¼ (0.01-1.0) | < 1e-6 | < 1e-4 |
| å¤§æ•°å€¼ (100-1000) | < 1e-4 | < 1e-2 |
| è´Ÿæ•°å€¼ | < 1e-6 | < 1e-4 |
| æ··åˆç¬¦å· | < 1e-6 | < 1e-4 |

---

## ğŸ” æ€§èƒ½å·®è·æ ¹å› åˆ†æ

### ä¸»è¦ç“¶é¢ˆ

1. **å¤šé¡¹å¼ä¹˜æ³•**: O(nÂ²) vs O(n log n)
   - kctsb: ä½¿ç”¨ NTL ZZ_pX å¤šé¡¹å¼ä¹˜æ³•ï¼ˆæ—  NTTï¼‰
   - SEAL: ä½¿ç”¨ NTT + RNS åˆ†è§£ + AVX2 SIMD

2. **æ¨¡è¿ç®—**:
   - kctsb: é€šç”¨å¤§æ•´æ•°æ¨¡è¿ç®—ï¼ˆNTL ZZï¼‰
   - SEAL: é¢„è®¡ç®— Barrett/Montgomery ç®€åŒ–

3. **å†…å­˜å¸ƒå±€**:
   - kctsb: å•ä¸€ ZZ_pX è¡¨ç¤º
   - SEAL: RNS åˆ†è§£ + ç¼“å­˜å‹å¥½å¸ƒå±€

4. **SIMD å‘é‡åŒ–**:
   - kctsb: æ ‡é‡æ“ä½œ
   - SEAL: AVX2/AVX-512 æ‰¹é‡å¤„ç†

### ä¼˜åŒ–è·¯å¾„

| é˜¶æ®µ | ä¼˜åŒ–æªæ–½ | é¢„æœŸæå‡ | å¤æ‚åº¦ |
|------|----------|----------|--------|
| P1 | NTT å¤šé¡¹å¼ä¹˜æ³• | 10-20x | ä¸­ç­‰ |
| P2 | RNS åˆ†è§£ | 5-10x | é«˜ |
| P3 | AVX2 SIMD | 2-4x | ä¸­ç­‰ |
| P4 | Barrett æ¨¡çº¦ç®€ | 2-3x | ä½ |
| P5 | å†…å­˜é¢„åˆ†é… | 1.2-1.5x | ä½ |

**ç»¼åˆé¢„æœŸ**: 100-600x æå‡ â†’ ç›®æ ‡è¾¾åˆ° SEAL 50-80%

---

## ğŸ“ˆ ä¸ SEAL 4.1 æ€§èƒ½å¯¹æ¯”

### SEAL å®˜æ–¹åŸºå‡†æ•°æ® (n=8192, æ—  HEXL)

| æ“ä½œ | SEAL CKKS (Âµs) | SEAL BFV (Âµs) | æ•°æ®æ¥æº |
|------|---------------|---------------|----------|
| Decrypt | 156 | 451 | SEAL-Embedded è®ºæ–‡ |
| Multiply | ~10,000 | ~10,000 | å®˜æ–¹ benchmark |
| Add | ~100 | ~100 | å®˜æ–¹ benchmark |

### SEAL ä¸ HElib å¯¹æ¯”

| æ“ä½œ | SEAL (ms) | HElib (ms) | å¤‡æ³¨ |
|------|----------|-----------|------|
| KeyGen | 50 | 80 | n=8192 |
| Encrypt | 5 | 8 | - |
| Multiply | 10 | 15 | BGV mode |

**åˆ†æ**: SEAL åœ¨å¤§å¤šæ•°æ“ä½œä¸Šæ¯” HElib å¿« 1.3-1.6xï¼Œä¸»è¦å¾—ç›Šäºæ›´æ¿€è¿›çš„ SIMD ä¼˜åŒ–ã€‚

---

## ğŸ› ï¸ ä¼˜åŒ–è®¡åˆ’ (Phase 2-4)

### Phase 2: NTT é›†æˆ (ç›®æ ‡: 10x æå‡)

- [ ] å°† `fe/common/ntt.h` é›†æˆåˆ° BGV/BFV/CKKS
- [ ] NTT åŸŸå¤šé¡¹å¼ä¹˜æ³•
- [ ] AVX2 è¶å½¢è¿ç®—åŠ é€Ÿ
- [ ] é¢„è®¡ç®—å•ä½æ ¹è¡¨

### Phase 3: RNS åˆ†è§£ (ç›®æ ‡: 5x æå‡)

- [ ] RNS åŸºè½¬æ¢
- [ ] å¤šæ¨¡æ•°å¹¶è¡Œè¿ç®—
- [ ] å»¶è¿ŸåŸºè½¬æ¢ä¼˜åŒ–

### Phase 4: ç”Ÿäº§åŠ å›º

- [ ] å†…å­˜æ± ç®¡ç†
- [ ] çº¿ç¨‹å®‰å…¨å¯†é’¥ç¼“å­˜
- [ ] æ‰¹å¤„ç† API

---

## âœ… æµ‹è¯•è¦†ç›–æ€»ç»“

| æ¨¡å— | æµ‹è¯•æ•° | çŠ¶æ€ |
|------|--------|------|
| BGV æ ¸å¿ƒ | 39 | âœ… 100% é€šè¿‡ |
| BFV æ ¸å¿ƒ | 26 | âœ… 100% é€šè¿‡ |
| CKKS æ ¸å¿ƒ | 33 | âœ… 100% é€šè¿‡ |
| NTT | 28 | âœ… 100% é€šè¿‡ |
| RNS | 21 | âœ… 100% é€šè¿‡ |
| **æ€»è®¡** | **147** | **100%** |

---

## ğŸ“ ç»“è®º

1. **åŠŸèƒ½å®Œæ•´æ€§**: âœ… BGV/BFV/CKKS ä¸‰å¤§æ–¹æ¡ˆå…¨éƒ¨å®ç°ï¼Œ100% æµ‹è¯•é€šè¿‡
2. **æ­£ç¡®æ€§éªŒè¯**: âœ… ç²¾ç¡®æ•´æ•°å’Œè¿‘ä¼¼å®æ•°è¿ç®—å‡ç¬¦åˆé¢„æœŸ
3. **æ€§èƒ½ç°çŠ¶**: âš ï¸ ä¸ SEAL å·®è· 30-2000xï¼Œéœ€ NTT+RNS ä¼˜åŒ–
4. **ä¸‹ä¸€æ­¥**: Phase 2 NTT é›†æˆï¼Œç›®æ ‡æå‡ 10x

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2026-01-19 UTC+8*
